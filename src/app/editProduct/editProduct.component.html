<ng-container *ngIf="!isLoading; else spinner">
  <ng-container *ngIf="productId; else editTitle">
    <h2>Add Product</h2>
  </ng-container>
  <form #addProductForm="ngForm" (ngSubmit)="onSubmit()">
    <div class="mb-3">
      <label for="code" class="form-label">Product Code</label>
      <input
        type="text"
        class="form-control"
        id="code"
        required
        pattern="([a-zA-Z0-9]|-)*"
        maxlength="6"
        minlength="3"
        name="code"
        [(ngModel)]="product.code"
        #code="ngModel"
      />
      <div class="form-text text-danger px-2" *ngIf="code.invalid">
        Product Code can only contains a-z A-Z 0-9 - and with a maximum of 6
        caracteres and minimum of 3 caracteres
      </div>

      <label for="name" class="form-label">Product Name</label>
      <input
        type="text"
        class="form-control"
        id="name"
        required
        pattern="([a-zA-Z0-9]|-| )*"
        maxlength="20"
        min="4"
        name="name"
        [(ngModel)]="product.name"
        #name="ngModel"
      />
      <div class="form-text text-danger px-2" *ngIf="name.invalid">
        Product Name can only contains a-z A-Z 0-9 - and with a maximum of 20
        caracteres and minimum of 4 caracteres
      </div>

      <label for="price" class="form-label">Product Price</label>
      <input
        type="number"
        class="form-control"
        id="price"
        required
        name="price"
        min="1"
        [(ngModel)]="product.price"
        #price="ngModel"
      />
      <div class="form-text text-danger px-2" *ngIf="price.invalid">
        Product Price must be at least 1$
      </div>

      <label for="quantity" class="form-label">Product Quantity</label>
      <input
        type="number"
        class="form-control"
        id="quantity"
        required
        name="quantity"
        min="0"
        [(ngModel)]="product.quantity"
        #quantity="ngModel"
      />
      <div class="form-text text-danger px-2" *ngIf="quantity.invalid">
        Product Quantity must be at least 0
      </div>

      <label for="image" class="form-label">Product Image</label>
      <input
        type="text"
        class="form-control"
        id="image"
        name="image"
        [(ngModel)]="product.image"
      />
    </div>
    <input
      type="submit"
      class="btn btn-primary"
      [disabled]="!addProductForm.valid || (addProductForm.valid && isSaving)"
      value="Save"
    />
  </form>
</ng-container>
<ng-template #editTitle>
  <h2>Update Product</h2>
</ng-template>

<ng-template #spinner>
  <div class="d-flex justify-content-evenly" style="width: 100%">
    <div class="spinner-border" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
  </div>
</ng-template>
